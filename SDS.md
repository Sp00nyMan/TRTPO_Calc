<h1>Спецификации разработки ПО</h1>
<h2>1 Введение</h2>
<h3>1.1 Цель</h3>
<p align = "justify">Данный документ содержит детали реализации требований к проекту «CalCon».</p>
<h3>1.2 Обзор системы</h3>
<p align = "justify">
Данный продукт представляет собой калькулятор в функцией конвертации валют. Он позволяет выполнять простейшие арифметические операции и конвертировать суммы из одной валюты в другую в режиме реального времени по наиболее актуальным курсам. Реализован удобный и понятный пользовательский интерфейс. Переход между окнами калькулятора и конвертера производится в одно нажатие.
</p>
<h3>1.3 Карта документа</h3>
<p align = "justify">В данном документе содержатся информациях об основных решениях, которые будут использоваться при разработке проекта. В разделе 3 содержится информация о структуре проекта и взаимосвязи классов в нём, а также описан протокол взаимодействия с API сервиса exchangeratesapi.io, формат запроса и ответа сервиса.</p>
<h3>1.4 Термины и сокращения</h3>
<p align = "justify">Конвертация валюты - обмена денежных единиц одного государства на денежные единицы другого.</p>
<p> Конвертер валют (конвертер) - алгоритм, выполняющий конвертацию валюты.
<h2>2 Обзор системы</h2>
<h3>2.1 Допущения</h3>
<p align = "justify">В ходе разработки серьёзных допущений не было.</p>
<h3>2.2 Ограничения</h3>
<p align = "justify">Спектр валют для конвертации ограничен списком курсов Европейского Центрального банка. Также работоспособность конвертера напрямую зависит от состояния сервиса exchangeratesapi.io</p>
<h3>2.3 Системная среда</h3>
<p align = "justify">Создаваемый программный продукт будет работать в операционной системе Windows 10.</p>
<h3>2.4 Методология разработки</h3>
<p align = "justify">Для создания данного программного продукта была выбрана объектно-ориентированная методология разработки ПО.</p>
<p align = "justify">Для взаимодействия с сервисом https://exchangeratesapi.io используются HTTP GET запросы</p>
<h3>2.5 Риски и опасные места</h3>
<p align = "justify">Конвертер валют перестаёт работать при сбоях со стороны сервиса https://exchangeratesapi.io/</p>
<h2>3 Архитектура</h2>
<h3>3.1 Обзор</h3>
<p align = "justify">Особенности архитектуры создаваемого приложения обусловлены объектно-ориентированной парадигмой разработки, а также тем, что данное приложение является сетевым.</p>
<h3>3.2 Протокол получения курса валют</h3>
<p align = "justify">Для получения курсов валют Европейского Центрального банка используется API сервиса https://exchangeratesapi.io/</p>
Формат запроса для получения актуальнейшего курса на данный момент выглядит следующим образом:
<p>
    GET https://api.exchangeratesapi.io/latest
</p>
В таком случае будет получен следующий ответ в формате JSON:

<p>{
"base": "EUR",
<p>  "date": "2020-10-10",
  <p>"rates": {
        <p>"CAD": 1.565,
        <p>"CHF": 1.1798,
        <p>"GBP": 0.87295,
        <p>"SEK": 10.2983,
        <p>"EUR": 1.092,
        <p>"USD": 1.2234,
        <p>...
  <p>}
}
<p>Как можно заметить, базовой валютой по умолчанию является Евро. Для того, чтобы специфицировать базовую валюту необходимо модифицировать запрос. Допустим, мы хотим получить курсы относительно доллара США. Тогда запрос будет выглядеть следующим образом:
<p>
    GET https://api.exchangeratesapi.io/latest?base=USD
</p>
Ответ на такой запрос будет выглядеть так:
<p>{
  <p>"base": "USD",
  <p>"date": "2020-10-10",
  <p>"rates": {
  <p>  "CAD": 1.565,
  <p>  "CHF": 1.1798,
  <p>  "GBP": 0.87295,
  <p>  "SEK": 10.2983,
  <p>  "EUR": 0.852,
  <p>  "USD": 1,
  <p>  ...
  <p>}
}
<p>Предположим, мы хотим конвертировать 10 USD в EUR. Используя предыдущий запрос кроме курса евро мы получим также все остальные. Эта информация избыточна и может замедлить работу программы. Для того, чтобы получить определённый курс изменим запрос:
<p>
    GET https://api.exchangeratesapi.io/latest?base=USD&symbols=EUR
</p>
Ответом на такой запросу является следующий JSON:
<p>{
  "base": "USD",
  <p>"date": "2020-10-10",
  <p>"rates": {
    <p>"EUR": 0.8527330093
  <p>}
}
<p>Теперь мы можем извлечь данный курс любым удобным способом работы с JSON (в моём случае был использован модуль Newtonsoft.Json, осуществляющий сериализацию и десериализацию объектов в(из) формат(а) JSON) и, домножив его на 10 получим, что 10$ USD = 8.527 EUR
<p>Диаграмма последовательности, отражающая взаимодействие с exchangerateapi.io класса CurrencyParser, представлена на рисунке 1
<p align="center">
<img src="images/sequence_diagram.png" alt="Диаграмма последовательности">
<p align="center"> Рисунок 1 - Диаграмма последовательности получения курса валют
<h3>3.3 Классы</h3>
<p align = "justify">В соответствии с парадигмой объектно-ориентированного программирования за каждую важную деталь создаваемой игры отвечает отдельный класс. К основным классам можно отнести:</p>
<ul>
 <li><p align = "justify">MainForm – отвечает за выбор и отображение текущего модуля;</p></li>
 <li><p align = "justify">Calculator – отвечает за отображение элементов интерфейса калькулятора, их взаимодействие, инициацию арифметических операций и вывод результа их выполнения;</p></li>
 <li><p align = "justify">Converter – отвечает за отображение элементов интерфейса конвертера валют, их взаимодействие и вывод результатов конвертации;</p></li>
 <li><p align = "justify">CurrencyParser – отвечает за получение актуальных курсов валют используя GET запросы;</p></li>
 <li><p align = "justify">ButtonHandler – отвечает за обработку нажатия кнопок конвертера и калькулятора, а также активизирует соответствующие события;</p></li>
 <li><p align = "justify">KeyHandler – отвечает за обработку ввода с клавиатуры, а также активизирует соответствующие события;</p></li>
 <li><p align = "justify">Handler – является базовым для двух предыдущих классов;</p></li>
 <li><p align = "justify">Operation – является базовым классом для всех арифметических операций;</p></li>
 <li><p align = "justify">Summation, Subtraction, Multiplication, Division, Power  – классы арифметических операций, выполняющие соответствующие операции;</p></li>
</ul>

<p> Диаграмма классов представлена на рисунке 2

<p align="center">
<img src="images/class_diagram.png" alt="Диаграмма классов">
<p align="center"> Рисунок 2 - Диаграмма классов

<h3>3.4 Диаграмма вариантов использования и интерфейс пользователя</h3>
<p align = "justify">На рисунке 3 изображена диаграмма вариантов использования
<p align="center"> <img src="images/use_case.png" alt="Диаграмма вариантов использования">
<p align = "center">Рисунок 3 – Диаграмма вариантов использования калькулятора "CalCon"</h2> </p>
<p align = "justify">Создаваемый программный продукт будет иметь классический графический пользовательский интерфейс, выполненный в стилистике Flat design, примером которой может служить интерфейс Windows 10.
<p> Сразу после запуска приложения появляется окно калькулятора (рисунок 4)
<p align="center"><img src="images/calc.png" alt="Окно калькулятора">
<p align = "center">Рисунок 4 - Окно калькулятора</p>
<p> Данное окно можно условно разделить на 3 части:
<ul>
    <li>Область вывода (Рисунок 5, область 1)
    <li>Область ввода 
        <ul>
            <li> Кнопки для ввода числа (Рисунок 5, область 2)
            <li> Кнопки управления и операций (Рисунок 5, область 3)
        </ul>
    </li>
</ul>
<p align="center"> <img src="images/calc_areas.png" alt="Окно калькулятора по областям">
<p align = "center">Рисунок 5 - Области окна калькулятора</p>

При нажатии на кнопку "Convert" окно калькулятора сменяется окном конвертера
<p align="center"><img src="images/conv.png" alt="Окно конвертера">
<p align = "center">Рисунок 6 - Окно конвертера</p>
Конвертер можно разделить на 2 области, которые, в свою очередь, можно разделить ещё на 4:
<ul>
    <li>Область вывода
            <ul>
            <li> Область вывода суммы (Рисунок 7, область 1)
            <li> Область выбора валюты (Рисунок 7, область 2)
        </ul>
    <li>Область ввода
        <ul>
            <li> Кнопки для ввода суммы (Рисунок 5, область 3)
            <li> Кнопки управления (Рисунок 5, область 4)
        </ul>
</ul>
<p align="center"> <img src="images/conv_areas.png" alt="Окно конвертера по областям">
<p align = "center">Рисунок 5 - Области окна конвертера</p>